(()=>{var H=()=>{let o=navigator.userAgent.toLowerCase(),s=/^((?!chrome|android).)*safari/i.test(o),i=/ipad|iphone|ipod/.test(o)||o.includes("mac")&&"ontouchend"in document;return{isSafari:s,isIOS:i,shouldUseMp4:s||i}};var U=o=>new Promise(s=>{o.readyState>=3?s(o):(o.addEventListener("canplaythrough",()=>s(o),{once:!0}),setTimeout(()=>s(o),5e3))}),O=(o={})=>{let i={...{componentSelector:".scroll_images_component",imagesWrapperSelector:".scroll_images_wrapper .scroll_image",imageSelector:".scroll_image",headingsSelector:".scroll_images_text_item",mediaSelector:".scroll_images_media img, .scroll_images_media video",headingAnimationProgress:[4,15,26,37,48,59,70,81,95],staggerTime:.8,animationDuration:2,initialIncr:0,initialPreloadCount:5,scrollSensitivity:{wheel:1e3,touch:200},deltaToConfig:{duration:2.5,ease:"power2.out"},fadeOutStart:.98},...o},e=i.initialIncr,n=0,h=0,d=0,p={value:0},S=!1,m=document.querySelector(i.componentSelector);if(!m)return;let r=m.querySelectorAll(".scroll_images_wrapper .scroll_image"),v=m.querySelectorAll(".scroll_images_text_item");if(!r.length)return;let g=[],u=[];if(r.forEach((t,l)=>{if(t.tagName==="IMG"){let c=t.getAttribute("data-src"),a=t.getAttribute("src");l<10&&a&&!c?(u.push(t),g.push({type:"image",src:a,element:t})):c&&g.push({type:"image",src:c,element:t})}else t.tagName==="VIDEO"&&g.push({type:"video",element:t})}),!g.length)return;let{shouldUseMp4:w}=H();r.forEach(t=>{t.tagName==="VIDEO"&&t.querySelectorAll("source").forEach(c=>{let a=c.getAttribute("type"),f=c.getAttribute("data-src");w&&a==="video/webm"||!w&&a==="video/mp4"?c.remove():f&&c.removeAttribute("src")})});let I=async()=>(u.length>0&&(await Promise.all(u.map(t=>new Promise(l=>{t.complete?l():(t.onload=()=>l(),t.onerror=()=>l())}))),u.forEach(t=>{t.style.visibility="visible",t.style.opacity="0.01",t.style.willChange="transform",t.offsetHeight}),await new Promise(t=>setTimeout(t,50)),u.forEach((t,l)=>{t.style.opacity="1",l>0&&(t.style.visibility="hidden")})),setTimeout(()=>E(),100),!0),E=async()=>{let l=g.slice(10).filter(a=>a.type==="image");if(l.length>0)for(let f=0;f<l.length;f+=5)l.slice(f,f+5).forEach(b=>{b.element.setAttribute("src",b.src)}),await new Promise(b=>setTimeout(b,100));let c=g.filter(a=>a.type==="video");if(c.length>0){let a=async f=>{if(f>=c.length)return;let y=c[f],b=y.element.getAttribute("data-src");b?y.element.setAttribute("src",b):y.element.querySelectorAll("source[data-src]").forEach(F=>{let z=F.getAttribute("data-src");z&&F.setAttribute("src",z)}),y.element.preload="auto",y.element.load(),await U(y.element),await a(f+1)};a(0)}};if(r.forEach((t,l)=>{t.setAttribute("data-index",l),t.tagName==="VIDEO"&&(t.muted=!0,t.playsInline=!0,t.loop=!0,t.preload="none"),l>0?t.style.visibility="hidden":t.style.visibility="visible"}),r.length>0&&r[0].tagName==="VIDEO"){let t=r[0].getAttribute("data-src");t?r[0].setAttribute("src",t):r[0].querySelectorAll("source[data-src]").forEach(c=>{let a=c.getAttribute("data-src");a&&c.setAttribute("src",a)}),r[0].preload="auto",r[0].load(),r[0].play().catch(()=>{})}let _=document.querySelector(".form_container");_&&gsap.set(_,{opacity:0});let A=(g.length-1)*i.staggerTime+i.animationDuration,x=gsap.timeline({paused:!0});x.to(r,{scale:2.5,z:.01,force3D:!0,ease:"power1.inOut",duration:i.animationDuration,transformOrigin:"center center",stagger:{each:i.staggerTime,onStart(){let t=this.targets()[0],l=parseInt(t.getAttribute("data-index"));h++,t.style.zIndex=h}}}).time(e),gsap.set(v,{opacity:0,y:30});let C=()=>{v.forEach((t,l)=>{if(l<i.headingAnimationProgress.length){let a=i.headingAnimationProgress[l]/100*A,f=a+1.7;if(e>=a&&e<f){let y=Math.min((e-a)/.4,1),b=y<.05?0:y;t.style.visibility="visible",gsap.set(t,{opacity:b,y:30-y*30})}else if(e>=f&&e<f+.4){let y=(e-f)/.4,b=y>.95?0:1-y;t.style.visibility="visible",gsap.set(t,{opacity:b,y:-30*y})}else e<a?(t.style.visibility="hidden",gsap.set(t,{opacity:0,y:30})):(t.style.visibility="hidden",gsap.set(t,{opacity:0,y:-30}))}})};C();let T=()=>{r.forEach((t,l)=>{if(t.tagName==="VIDEO"){let c=l*i.staggerTime,a=c+i.staggerTime+i.animationDuration;e>=c&&e<a?t.paused&&t.play().catch(()=>{}):t.paused||t.pause()}})},N=()=>{let t=Math.floor(e/i.staggerTime),l=4,c=1;r.forEach((a,f)=>{let y=f-t;y<-l||y>c?(a.style.visibility="hidden",a.style.willChange="auto"):(a.style.visibility="visible",a.style.willChange="transform")})},L=gsap.quickTo(p,"value",{duration:i.deltaToConfig.duration,ease:i.deltaToConfig.ease,onUpdate:()=>{e+=p.value,e=Math.max(n,Math.min(e,A)),x.time(e),C(),T(),S&&N();let t=e/A;if(t>=i.fadeOutStart){let l=(t-i.fadeOutStart)/(1-i.fadeOutStart);gsap.set(m,{opacity:1-l})}else gsap.set(m,{opacity:1});_&&(t>=1?gsap.to(_,{opacity:1,pointerEvents:"auto",duration:.3}):gsap.to(_,{opacity:0,pointerEvents:"none"}))}}),P=Observer.create({target:window,type:"wheel,touch",onChange:t=>{if(!S)return;let l=t.event.type==="touchmove",c=l?i.scrollSensitivity.touch:i.scrollSensitivity.wheel,a=l?-t.deltaY:t.deltaY;L(a/c)},onStop:()=>{S&&L(0)}});return{preloadInitialAssets:I,preloadRemainingAssets:E,getProgress:()=>e/A,getTotalDuration:()=>A,getCurrentTime:()=>e,enableScroll:()=>{S=!0},disableScroll:()=>{S=!1},animateToProgress:(t,l=2,c=null)=>{let a=t*A,f=Math.ceil(a/i.staggerTime);return r.forEach((y,b)=>{b<=f+1&&(y.style.visibility="visible")}),gsap.to({value:e},{value:a,duration:l,ease:"power2.out",onUpdate:function(){e=this.targets()[0].value,x.time(e),C()},onComplete:function(){c!==null&&(n=c*A)}})},destroy:()=>{x.kill(),P&&P.kill()}}};var Y=(o,s)=>(o%s+s)%s,q=(o={})=>{let i={...{componentSelector:".scroll_images_final",scrollSensitivity:{wheel:1e3,touch:200}},...o},e=0,n=0,h=0,d={delta:0},p=!1,S=document.querySelector(i.componentSelector);if(!S)return;let m=S.querySelectorAll(".scroll_images_wrapper .scroll_image");if(!m.length)return;let r=[];if(S.querySelectorAll(".scroll_images_media img").forEach(u=>{r.push(u.getAttribute("src"))}),!r.length)return;m.forEach(u=>{u.setAttribute("data-index",n),u.setAttribute("src",r[n%r.length]),n++});let v=gsap.quickTo(d,"delta",{duration:2,ease:"power1",onUpdate:()=>{e+=d.delta,g.time(e)}}),g=gsap.timeline({paused:!0});return g.to(m,{scale:2.005,ease:"expo.inOut",duration:8,stagger:{each:1,repeat:-1,onRepeat(){let u=this.targets()[0],w=d.delta>=0;n+=w?1:-1,u.style.zIndex=w?n:n-(m.length-1);let I=w?u.previousElementSibling||m[m.length-1]:u.nextElementSibling||m[0];h=Y(parseInt(I.getAttribute("data-index"))+(w?1:-1),r.length),u.setAttribute("data-index",h),u.setAttribute("src",r[h])}}}).time(e),Observer.create({target:window,type:"wheel,touch",onChange:u=>{if(!p)return;let w=u.event.type==="touchmove",I=w?300:1e3,E=w?-u.deltaY:u.deltaY;v(E/I)},onStop:()=>{p&&v(0)}}),{getProgress:()=>e,getCurrentTime:()=>e,enableScroll:()=>{p=!0},disableScroll:()=>{p=!1},animateToTime:(u,w=2)=>gsap.to({value:e},{value:u,duration:w,ease:"power2.out",onUpdate:function(){e=this.targets()[0].value,g.time(e)}}),destroy:()=>{g.kill()}}};var k=o=>{let s=document.querySelector(".loader_wrapper"),i=document.querySelector(".loader_nums_wrap"),e=document.querySelector(".loader_num_track.is-1"),n=document.querySelector(".loader_num_track.is-2"),h=n.querySelector(".loader_num:first-child"),d=e.querySelectorAll(".loader_num:not(:first-child)"),p=n.querySelectorAll(".loader_num:not(:first-child)");return new Promise(async S=>{let m=gsap.timeline({delay:.5}),r=gsap.timeline();r.to(i,{x:s.scrollWidth/5,duration:.7,ease:"circ.out"}).to(e,{width:"auto"},0).to([d[0],p[0]],{y:"0%",opacity:1,filter:"blur(0px)",duration:.75,ease:"circ.out",stagger:.1},"<25%").to(h,{y:"-100%",opacity:0,filter:"blur(4px)",duration:.5,ease:"circ.out"},"<0%");let v=gsap.timeline();v.to(i,{x:s.scrollWidth/1.75,duration:1.4,ease:"circ.out"}).to([d[0],p[0]],{y:"-100%",opacity:0,filter:"blur(4px)",duration:.5,ease:"circ.out",stagger:.1},"<0%").to([d[1],p[1]],{y:"0%",opacity:1,filter:"blur(0px)",duration:.75,ease:"circ.out",stagger:.1},"<0%");let g=gsap.timeline();g.to(i,{x:()=>s.scrollWidth-i.scrollWidth,duration:.8,ease:"circ.out"}).to([d[1],p[1]],{y:"-100%",opacity:0,filter:"blur(4px)",duration:.5,ease:"circ.out",stagger:.1},"<0%").to([d[2],p[2]],{y:"0%",opacity:1,filter:"blur(0px)",duration:.75,ease:"circ.out",stagger:.1},"<25%"),m.add(r).add(v,">.5").add(g,">.5"),await m.then(),o&&await o,await gsap.to(s,{opacity:0,duration:.6}),S()})};var W=()=>{let o={animate:!0,patternWidth:100,patternHeight:100,grainOpacity:.05,grainDensity:1,grainWidth:1,grainHeight:1};grained("#grain",o)};var D=()=>{let o=document.querySelectorAll(".form_input");o.length&&o.forEach(s=>{let e=window.innerWidth<991?16:17.5,n=document.createElement("span");n.id="form-measure-span",n.style.position="absolute",n.style.visibility="hidden",n.style.whiteSpace="nowrap",n.style.fontFamily=window.getComputedStyle(s).fontFamily,document.body.appendChild(n);let h=()=>{if(s.value.length===0){gsap.to(s,{fontSize:`${e}vw`,duration:.3,ease:"power2.out"});return}let p=s.offsetWidth,S=1,m=e,r=e;for(let v=0;v<15;v++){let g=(S+m)/2;n.style.fontSize=`${g}vw`,n.textContent=s.value,n.offsetWidth<=p*.98?(S=g,r=g):m=g}gsap.to(s,{fontSize:`${r}vw`,duration:.3,ease:"power2.out"})};gsap.set(s,{fontSize:`${e}vw`}),s.addEventListener("input",h),s.addEventListener("paste",()=>{setTimeout(h,10)})})};var V=()=>{let o=document.querySelector(".form_input");if(!o)return;let s=o.parentElement;s.style.position="relative";let i=document.querySelector(".form_submit_wrapper"),e=document.createElement("div");e.className="form_cursor",e.innerHTML=`
    <svg width="auto" height="100%" display="block" viewBox="0 0 44 272" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M21.6074 8.48883V263.489" stroke="currentColor"/>
      <path d="M0.107422 0.488831C0.507422 0.574762 14.6074 5.85797 21.6074 8.48883L43.1074 0.488831" stroke="currentColor"/>
      <path d="M0.107422 271.489C0.507422 271.403 14.6074 266.12 21.6074 263.489L43.1074 271.489" stroke="currentColor"/>
    </svg>
  `,e.style.position="absolute",e.style.pointerEvents="none",e.style.bottom="0%",e.style.transition="left 0.05s ease-out, height 0.3s ease-out",e.style.height="80%",s.appendChild(e),o.style.caretColor="transparent";let h=document.createElement("canvas").getContext("2d"),d=()=>{requestAnimationFrame(()=>{let S=()=>{let m=window.getComputedStyle(o),r=m.fontSize,v=m.fontFamily,g=m.fontWeight;h.font=`${g} ${r} ${v}`;let u=o.selectionStart!==null?o.selectionStart:o.value.length,w=o.value.substring(0,u),I=h.measureText(w).width,E=o.getBoundingClientRect(),_=s.getBoundingClientRect(),A=parseFloat(m.paddingLeft)||0,x=E.left-_.left+A+I;e.style.left=`${x}px`;let T=parseFloat(r)*1.1;e.style.height=`${T}px`,console.log("Cursor:",{cursorPos:u,text:w,textWidth:I,leftOffset:x,fontSize:r,cursorHeight:T})};S(),setTimeout(S,320)})},p=gsap.timeline({repeat:-1});p.to(e,{opacity:0,duration:.5,ease:"steps(1)"}).to(e,{opacity:1,duration:.5,ease:"steps(1)"}),o.addEventListener("focus",()=>{e.style.opacity="1",p.play(),d()}),o.addEventListener("blur",()=>{e.style.opacity="0",p.pause()}),o.addEventListener("input",()=>{d(),i&&(o.value.length>=1?gsap.to(i,{width:"100%",duration:.3,ease:"power2.out"}):gsap.to(i,{width:"",duration:.3,ease:"power2.out"}))}),o.addEventListener("click",d),o.addEventListener("keyup",d),o.addEventListener("keydown",d),o.addEventListener("mouseup",d),o.addEventListener("select",d),o.addEventListener("selectionchange",d),document.activeElement===o?(e.style.opacity="1",p.play(),d()):(e.style.opacity="0",p.pause())};var M=()=>{let o=document.querySelector(".form_input"),s=document.querySelector(".form_submit_wrapper");if(!o||!s)return;let i=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/,e=()=>{let n=o.value.trim();i.test(n)?s.classList.add("is-active"):s.classList.remove("is-active")};o.addEventListener("input",e),o.addEventListener("paste",()=>{setTimeout(e,10)}),e()};var B=()=>{let o=document.querySelector(".form_success");if(!o){console.warn("Form success message not found");return}new MutationObserver(e=>{e.forEach(n=>{n.type==="attributes"&&n.attributeName==="style"&&window.getComputedStyle(o).display==="block"&&(console.log("Form submitted! Starting final scroll sequence..."),i())})}).observe(o,{attributes:!0,attributeFilter:["style"]});let i=()=>{window.scrollImagesAnimation&&(window.scrollImagesAnimation.destroy(),window.scrollImagesAnimation=null);let e=document.querySelector(".scroll_images_component");e&&gsap.to(e,{opacity:0,duration:.5,onComplete:()=>{e.remove()}}),setTimeout(()=>{let n=document.querySelector(".scroll_images_final");if(n){let h=document.querySelector(".form_container");h&&h.classList.add("is-diff"),gsap.to(n,{opacity:1,duration:.5});let d=q();d.animateToTime(3,2).then(()=>{d.enableScroll()})}},600)}};var $=()=>{D(),V(),M(),B()};window.scrollImagesAnimation=null;window.scrollImagesInfiniteAnimation=null;window.addEventListener("DOMContentLoaded",async()=>{let o=new Date().getFullYear();document.querySelectorAll("#current-year").forEach(n=>{n.textContent=o}),W(),window.scrollImagesAnimation=O({initialPreloadCount:10,fadeOutStart:.99}),window.scrollImagesInfiniteAnimation=q();let s=window.scrollImagesAnimation.preloadInitialAssets();await k(s),window.scrollImagesAnimation.animateToProgress(.08,3,.03).then(()=>{window.scrollImagesAnimation.enableScroll()}),$()});})();
